# 📱 水質調査データメモアプリ（ローカル専用版）

完全オフライン動作の水質調査データ記録PWA（Progressive Web App）

## 🚀 **特徴**

### ✨ **ローカル専用設計**
- **完全オフライン動作**: インターネット接続不要
- **データローカル保存**: IndexedDBによる安全なデータ保存
- **即座利用可能**: 設定・アカウント作成不要
- **プライバシー重視**: データは端末内のみに保存

### 📱 **スマホ完全対応**
- **PWA対応**: ホーム画面にインストール可能
- **レスポンシブデザイン**: あらゆる画面サイズに対応
- **タッチ操作最適化**: スワイプナビゲーション対応
- **オフライン起動**: ネットワーク不要で瞬時起動

## 📲 **スマホでのクイックスタート**

### 📲 **方法1: 同一Wi-Fi経由でアクセス（推奨）**

#### 1. パソコンでサーバー起動
```bash
cd water-quality-app
python3 -m http.server 8000
```

#### 2. IPアドレスを確認
```bash
# Macの場合
ifconfig | grep "inet " | grep -v 127.0.0.1

# Windowsの場合
ipconfig | findstr "IPv4"
```

#### 3. スマホでアクセス
- スマホのブラウザで `http://[あなたのIPアドレス]:8000` にアクセス
- 例: `http://192.168.1.100:8000`

### 📲 **方法2: GitHub Codespaces使用**

1. GitHubでリポジトリ作成
2. ファイルをアップロード
3. Codespacesで起動
4. ポート8000を「Public」に設定

## 📱 **主な機能**

### 🎯 **データ入力機能**
- 📍 **GPS位置情報取得**: ワンタップで座標自動入力
- 🌡️ **水質測定項目**: 水温、pH、溶存酸素、濁度など
- ☀️ **環境情報**: 天候、水深などの記録
- 📝 **自由記述**: メモ欄での詳細記録

### 💾 **データ管理機能**
- **即座保存**: 入力完了と同時にローカル保存
- **データ一覧**: 時系列での測定結果表示
- **検索・ソート**: 日時順での自動ソート
- **安全な削除**: 確認ダイアログでの誤操作防止

### 📊 **データ出力機能**
- **CSV出力**: Excel/Googleスプレッドシートで開ける形式
- **完全な互換性**: 日本語対応、文字化けなし
- **日時フォーマット**: 分析しやすい形式で出力
- **即座ダウンロード**: ワンクリックで出力完了

## 🛠️ **使用方法**

### 📱 **基本的な使用フロー**

#### 1. **アプリの起動**
```
1. ブラウザでアクセス
2. PWAとしてインストール（推奨）
3. ホーム画面からアプリ起動
```

#### 2. **データ入力**
```
1. 📍 GPS取得ボタンで位置情報取得
2. 調査地点名を入力
3. 各測定項目を順次入力
4. 💾 データ保存ボタンで記録
```

#### 3. **データ確認**
```
1. データ一覧タブに切り替え
2. 保存済みデータを時系列で確認
3. 必要に応じてCSV出力
```

### 🌍 **GPS機能について**

#### **通常環境**
- **自動取得**: GPSボタンで正確な座標取得
- **高精度**: 数メートル単位での位置特定
- **バッテリー最適化**: 必要時のみGPS使用

#### **制限環境（Codespacesなど）**
- **手動入力**: 座標を直接入力
- **Google Maps連携**: 右クリックで座標コピー
- **例示**: 東京駅（35.6762, 139.6503）

### 📊 **データ形式**

#### **入力可能項目**
```
・調査地点名: 文字列
・座標: 緯度,経度（GPS自動 or 手動）
・調査日時: 自動設定（変更可能）
・水温: 数値（°C）
・pH: 数値（0-14）
・溶存酸素: 数値（mg/L）
・濁度: 数値（NTU）
・電気伝導度: 数値（μS/cm）
・水深: 数値（m）
・天候: 選択式（晴れ/曇り/雨/雪/霧）
・メモ: 自由記述
```

#### **CSV出力形式**
```csv
調査地点,座標,調査日時,水温(°C),pH,溶存酸素(mg/L),濁度(NTU),電気伝導度(μS/cm),水深(m),天候,メモ,保存日時
多摩川河口,"35.5533, 139.7581",2024-03-15T10:30,18.5,7.2,8.3,2.1,320,1.5,晴れ,サンプル調査,2024/03/15 10:30
```

## ⚙️ **技術仕様**

### 🏗️ **アーキテクチャ**
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **データベース**: IndexedDB（ブラウザ内蔵）
- **PWA**: Service Worker, Web App Manifest
- **レスポンシブ**: CSS Grid, Flexbox

### 📦 **ストレージ**
- **容量**: ブラウザ制限まで（通常数GB）
- **永続性**: ブラウザデータ削除まで維持
- **バックアップ**: CSV出力での外部保存
- **復元**: 手動でCSVインポート（未実装）

### 🔒 **セキュリティ**
- **ローカル保存**: データは端末内のみに保存
- **外部送信なし**: インターネットへのデータ送信一切なし
- **プライバシー保護**: 個人情報の外部流出リスクゼロ

## 📱 **対応環境**

### ✅ **動作確認済み**
- **PC**: Chrome 90+, Firefox 88+, Safari 14+
- **Android**: Chrome 90+, Edge 90+
- **iPhone/iPad**: Safari 14+
- **PWA**: すべての対応ブラウザでホーム画面追加可能

### 💡 **推奨環境**
- **RAM**: 2GB以上
- **ストレージ**: 50MB以上の空き容量
- **OS**: Android 8+, iOS 13+

## 🔧 **開発・カスタマイズ**

### 📁 **ファイル構成**
```
water-quality-app/
├── index.html          # メインHTML
├── style.css           # スタイルシート  
├── app.js              # メインアプリケーション
├── firebase-config.js  # 設定ファイル（ローカル専用）
├── service-worker.js   # PWA用Service Worker
├── manifest.json       # PWAマニフェスト
└── README.md          # このファイル
```

### 🛠️ **カスタマイズ例**

#### **測定項目の追加**
```html
<!-- index.html -->
<div class="form-group">
    <label for="new-parameter">🧪 新しい測定項目</label>
    <input type="number" id="new-parameter" name="newParameter">
</div>
```

#### **天候選択肢の変更**
```html
<option value="快晴">☀️ 快晴</option>
<option value="薄曇り">⛅ 薄曇り</option>
```

## 📋 **使用例・活用場面**

### 🌊 **フィールドワーク**
- **河川調査**: 流域の水質モニタリング
- **湖沼調査**: 季節変化の追跡調査
- **海域調査**: 沿岸環境の評価
- **地下水調査**: 井戸・湧水の水質確認

### 🎓 **教育・研究**
- **学校教育**: 理科実験でのデータ記録
- **大学研究**: 卒論・修論の調査データ
- **市民科学**: 地域住民による環境モニタリング
- **環境アセスメント**: 開発前後の水質比較

### 💼 **業務利用**
- **環境コンサル**: クライアント向け調査報告
- **水道事業**: 水源地の定期監視
- **養殖業**: 養殖環境の品質管理
- **研究機関**: 長期観測データの蓄積

## 🚨 **注意事項**

### ⚠️ **データバックアップ**
- **重要**: 定期的にCSV出力でバックアップ実行
- **リスク**: ブラウザデータ削除でデータ消失の可能性
- **推奨**: 測定後は即座にCSV出力

### 🔋 **バッテリー管理**
- **GPS使用**: バッテリー消費が増加
- **最適化**: 必要時のみGPS機能を使用
- **長時間調査**: モバイルバッテリー持参推奨

### 🌐 **ネットワーク**
- **完全オフライン**: インターネット接続不要
- **GPS精度**: WiFi/4G接続時により高精度
- **時刻同期**: 定期的な端末時刻確認推奨

## 📞 **サポート・FAQ**

### ❓ **よくある質問**

**Q: データが消えてしまいました**
A: ブラウザの「サイトデータを削除」でデータが失われます。定期的なCSV出力でバックアップを取ってください。

**Q: GPS が取得できません**
A: 位置情報の許可が必要です。ブラウザ設定で当サイトの位置情報アクセスを許可してください。

**Q: 他の端末でデータを見たい**
A: CSV出力でデータをエクスポートし、他の端末でファイルを開いてください。

**Q: 測定項目を追加したい**
A: index.htmlを編集して項目を追加できます。技術的知識が必要です。

### 🎯 **このアプリの利点**

✅ **設定不要**: アカウント作成・ログイン不要
✅ **即座利用**: ダウンロード後すぐに使用可能  
✅ **完全無料**: 追加費用・課金一切なし
✅ **プライバシー**: データは端末内のみに保存
✅ **オフライン**: ネットワーク不要で使用可能
✅ **軽量**: 数MBの小さなアプリサイズ

---

## 💡 **開発背景**

このアプリは、フィールドワークでの水質調査において「シンプルで確実なデータ記録」を目指して開発されました。

クラウド同期やアカウント管理などの複雑な機能を意図的に排除し、「現地でのデータ入力」と「確実なローカル保存」に特化することで、研究・教育現場での実用性を最大化しています。 